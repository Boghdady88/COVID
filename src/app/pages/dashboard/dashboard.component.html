<div class="container-fluid">
  <div *ngIf="isModalShown" [config]="{ show: true }" (onHidden)="onHidden()" bsModal #autoShownModal="bs-modal"
    class="modal fade d-block" tabindex="-1" role="dialog" aria-labelledby="dialog-auto-name">
    <div class="modal-dialog modal-dialog-centered">
      <div class="modal-content">
        <div class="modal-body text-center pt-4">

          <div *ngIf="modalStep == 1" class="modal-step" [@fadeInOutAnimation]>
            <img src="assets/images/step-1.png" width="125">
            <h5 class="text-white mt-3">{{ 'Shared.HowToPrevent.Slide1.1' | translate }} <span
                class="text-blue">{{ 'Shared.HowToPrevent.Slide1.2' | translate }}</span></h5>
            <h6 class="text-white">{{ 'Shared.HowToPrevent.Slide1.3' | translate }} <span
                class="text-danger">{{ 'Shared.HowToPrevent.Slide1.4' | translate }}</span>
            </h6>
            <p>{{ 'Shared.HowToPrevent.Slide1.5' | translate }}</p>
          </div>
          <div *ngIf="modalStep == 2" class="modal-step" [@fadeInOutAnimation]>
            <img src="assets/images/step-2.png" width="125">
            <h5 class="text-white mt-3">{{ 'Shared.HowToPrevent.Slide2.1' | translate }} <span
                class="text-blue">{{ 'Shared.HowToPrevent.Slide2.2' | translate }}</span></h5>
            <p>{{ 'Shared.HowToPrevent.Slide2.3' | translate }}</p>
          </div>
          <div *ngIf="modalStep == 3" class="modal-step" [@fadeInOutAnimation]>
            <img src="assets/images/step-3.png" width="125">
            <h5 class="text-white mt-3">{{ 'Shared.HowToPrevent.Slide3.1' | translate }} <span
                class="text-blue">{{ 'Shared.HowToPrevent.Slide3.2' | translate }}</span></h5>
            <p>{{ 'Shared.HowToPrevent.Slide3.3' | translate }}</p>

          </div>
          <div *ngIf="modalStep == 4" class="modal-step" [@fadeInOutAnimation]>
            <img src="assets/images/step-4.png" width="125">
            <h5 class="text-white mt-3">{{ 'Shared.HowToPrevent.Slide4.1' | translate }} <span
                class="text-blue">{{ 'Shared.HowToPrevent.Slide4.2' | translate }}</span></h5>
            <p>
              {{ 'Shared.HowToPrevent.Slide4.3' | translate }}
            </p>
          </div>
          <div *ngIf="modalStep == 5" class="modal-step" [@fadeInOutAnimation]>
            <img src="assets/images/step-5.png" width="125">
            <h5 class="text-white mt-3">{{ 'Shared.HowToPrevent.Slide5.1' | translate }} <span
                class="text-blue">{{ 'Shared.HowToPrevent.Slide5.2' | translate }}</span></h5>
            <p>
              {{ 'Shared.HowToPrevent.Slide5.3' | translate }}
            </p>
          </div>
          <div class="col-12 text-center" *ngIf="modalStep!=5">
            <button (click)="nextStep()"
              class="btn btn-secondary waves-effect waves-light mb-4"><span>{{ 'Shared.HowToPrevent.buttonNext' | translate }}
              </span><i class="fa fa-arrow-right mr-1"></i></button>
          </div>
          <div class="col-12 text-center" *ngIf="modalStep==5">
            <div class="form-group">
              <div class="custom-control custom-checkbox">
                <input type="checkbox" class="custom-control-input" id="forDontShow" #dontShow>
                <label class="custom-control-label"
                  for="forDontShow">{{ 'Shared.HowToPrevent.dontShowText' | translate }}</label>
              </div>
            </div>
            <button (click)="close(dontShow.checked)" class="btn btn-blue waves-effect waves-light mb-4"><i
                class="fas fa-times-circle mr-1"></i><span>
                {{ 'Shared.HowToPrevent.buttonClose' | translate }}</span></button>
          </div>
        </div>
      </div>
    </div>
  </div>
  <div class="row">
    <div class="col-xl-3 col-md-6 col-6">
      <div class="card-box">
        <h4 class="header-title m-0 text-md-left text-center">{{ 'Shared.TopCards.2' | translate }}</h4>

        <div class="topBoxes">
          <div class="fa-3x text-center" [class.d-none]="!isLoading">
            <i class="fas fa-circle-notch fa-spin m-2"></i>
          </div>
          <div class="topBoxesDetails text-md-right text-center" [class.d-none]="isLoading">

            <span class="badge badge-blue badge-pill float-md-left m-md-3 mt-2"><i class="mdi mdi-trending-up"></i>
            </span>
            <h2 class="font-weight-normal"> {{totalCases | number}} </h2>
            <p class="text-muted">{{todayCases}} {{ 'Shared.TopCards.6' | translate }}</p>
          </div>
          <div class="progress progress-bar-alt-blue progress-sm m-0">
            <div class="progress-bar bg-blue" role="progressbar" aria-valuenow="77" aria-valuemin="0"
              aria-valuemax="100" style="width: 100%;">
            </div>
          </div>
        </div>
      </div>

    </div><!-- end col -->

    <div class="col-xl-3 col-md-6 col-6">
      <div class="card-box">
        <h4 class="header-title m-0 text-md-left text-center">{{ 'Shared.TopCards.3' | translate }}</h4>

        <div class="topBoxes">
          <div class="fa-3x text-center" [class.d-none]="!isLoading">
            <i class="fas fa-circle-notch fa-spin m-2"></i>
          </div>
          <div class="topBoxesDetails text-md-right text-center" [class.d-none]="isLoading">
            <span
              class="badge badge-danger badge-pill float-md-left m-md-3 mt-2">{{(totalDeaths / finishedCases * 100) | number:'.1-2'}}%
              <i class="mdi mdi-trending-up"></i> </span>
            <h2 class="font-weight-normal"> {{totalDeaths | number}} </h2>
            <p class="text-muted">{{todayDeaths}} {{ 'Shared.TopCards.6' | translate }}</p>
          </div>
          <div class="progress progress-bar-alt-danger progress-sm m-0">
            <div class="progress-bar bg-danger" role="progressbar" aria-valuenow="77" aria-valuemin="0"
              aria-valuemax="100" style="width: 100%;">
            </div>
          </div>
        </div>
      </div>

    </div><!-- end col -->

    <div class="col-xl-3 col-md-6 col-6">
      <div class="card-box">
        <h4 class="header-title m-0 text-md-left text-center">{{ 'Shared.TopCards.4' | translate }}</h4>

        <div class="topBoxes">
          <div class="fa-3x text-center" [class.d-none]="!isLoading">
            <i class="fas fa-circle-notch fa-spin m-2"></i>
          </div>
          <div class="topBoxesDetails text-md-right text-center" [class.d-none]="isLoading">
            <span
              class="badge badge-success badge-pill float-md-left m-md-3 mt-2">{{(totalRecoveries / finishedCases * 100) | number:'.1-2'}}%
              <i class="mdi mdi-trending-up"></i> </span>
            <h2 class="font-weight-normal"> {{totalRecoveries | number}} </h2>
            <p class="text-muted">{{activeCases | number}} {{ 'Shared.TopCards.8' | translate }}</p>
          </div>
          <div class="progress progress-bar-alt-success progress-sm m-0">
            <div class="progress-bar bg-success" role="progressbar" aria-valuenow="77" aria-valuemin="0"
              aria-valuemax="100" style="width: 100%;">
            </div>
          </div>
        </div>
      </div>

    </div><!-- end col -->


    <div class="col-xl-3 col-md-6 col-6">
      <div class="card-box">
        <h4 class="header-title m-0 text-md-left text-center">{{ 'Shared.TopCards.5' | translate }}</h4>

        <div class="topBoxes">
          <div class="fa-3x text-center" [class.d-none]="!isLoading">
            <i class="fas fa-circle-notch fa-spin m-2"></i>
          </div>
          <div class="topBoxesDetails text-md-right text-center" [class.d-none]="isLoading">
            <span
              class="badge badge-warning badge-pill float-md-left m-md-3 mt-2">{{(totalCritical / activeCases * 100) | number:'.1-2'}}%
              <i class="mdi mdi-trending-up"></i> </span>
            <h2 class="font-weight-normal"> {{totalCritical | number}} </h2>
            <p class="text-muted">{{casesPer1M | number}} {{ 'Shared.TopCards.7' | translate }}</p>
          </div>
          <div class="progress progress-bar-alt-warning progress-sm m-0">
            <div class="progress-bar bg-warning" role="progressbar" aria-valuenow="77" aria-valuemin="0"
              aria-valuemax="100" style="width: 100%;">
            </div>
          </div>
        </div>
      </div>

    </div><!-- end col -->

  </div>


  <div class="row">
    <div class="col-xl-4">
      <div class="card-box">
        <div class="float-right">
          <p>{{ 'Home.AffectedCountries.2' | translate }}</p>
        </div>

        <h4 class="header-title mb-3">{{ 'Home.AffectedCountries.1' | translate }} </h4>
        <div class="form-group row">
          <div class="col-md-8 col-8">
            <input type="text" id="example-placeholder" #search (keyup)="searchCountries(search.value)"
              class="form-control"
              placeholder="{{ 'Home.AffectedCountries.3' | translate }} {{countries.length}} {{ 'Home.AffectedCountries.1' | translate }}">
          </div>
          <div class="col-md-4 col-4">
            <select class="custom-select" #sortBy (change)="sortCountries(sortBy.value,search.value)">
              <option selected="" disabled>{{ 'Home.AffectedCountries.4' | translate }}</option>
              <option value="cases">{{ 'Home.AffectedCountries.5' | translate }}</option>
              <option value="todayCases">{{ 'Home.AffectedCountries.6' | translate }}</option>
              <option value="deaths">{{ 'Home.AffectedCountries.7' | translate }}</option>
              <option value="todayDeaths">{{ 'Home.AffectedCountries.8' | translate }}</option>
              <option value="recovered">{{ 'Home.AffectedCountries.9' | translate }}</option>
            </select>
          </div>
        </div>
        <div class="fa-3x text-center" [class.d-none]="!isLoadingCountries">
          <i class="fas fa-circle-notch fa-spin m-2"></i>
        </div>
        <div class="infectedCountries" [class.d-none]="isLoadingCountries">
          <perfect-scrollbar #perfectscrollbar style="height:346px;">
            <div class="infectedCountry" *ngFor="let country of countries">
              <a [routerLink]="[ '/country', country.country.toLowerCase() ]">
                <div class="infectedCountryFlag">
                  <img *ngIf="countryCodes[country.country] else unknown" style="height: 30px;
                width: 40px;" src="assets/flags/{{countryCodes[country.country].toLowerCase()}}.svg"
                    alt="{{country.country}}">
                  <ng-template #unknown>
                    <img src="assets/flags/unknown.svg" alt="{{country.country}}">
                  </ng-template>
                </div>
                <h5 class="infectedCountryName mt-0 mb-1">{{country.country}}</h5>
                <p class="infectedCountryDetails font-weight-bold"><span class="text-blue">{{country.cases}}
                    {{ 'Home.AffectedCountries.10' | translate }}</span> & <span class="text-danger">{{country.deaths}}
                    {{ 'Home.AffectedCountries.11' | translate }}</span></p>
                <p class="infectedCountryCases text-blue">+{{country.todayCases}}
                  {{ 'Home.AffectedCountries.10' | translate }}</p>
                <p class="infectedCountryDeaths text-danger">+{{country.todayDeaths}}
                  {{ 'Home.AffectedCountries.11' | translate }}</p>
              </a>
            </div>
          </perfect-scrollbar>


        </div>
      </div>
    </div><!-- end col -->

    <div class="col-xl-8">
      <div class="card-box">
        <div class="float-md-right float-right d-md-inline d-none">
          <button type="button" class="btn btn-xs btn-lighten-blue waves-effect waves-light width-xs mr-md-1 mr-0"
            (click)="loadMap('cases');">{{ 'Shared.TopCards.1' | translate }} </button>
          <button type="button" class="btn btn-xs btn-lighten-danger waves-effect waves-light width-xs mr-md-1 mr-0"
            (click)="loadMap('deaths')">{{ 'Shared.TopCards.3' | translate }}</button>
          <button type="button" class="btn btn-xs btn-lighten-success waves-effect waves-light width-xs mr-md-1 mr-0"
            (click)="loadMap('recovered')">{{ 'Shared.TopCards.4' | translate }}</button>
          <button type="button" class="btn btn-xs btn-lighten-warning waves-effect waves-light width-xs"
            (click)="loadMap('critical')">{{ 'Shared.TopCards.5' | translate }}</button>
        </div>
        <h4 class="header-title mt-0 mb-3 mt-md-0">{{ 'Home.WorldMap.1' | translate }} <button type="button"
            class="btn btn-xs btn-lighten-secondary waves-effect waves-light width-xs mr-md-1 mr-0"
            (click)="showModal();">{{ 'Home.WorldMap.2' | translate }} </button></h4>
        <div class="fa-3x text-center" [class.d-none]="!isLoadingMap">
          <i class="fas fa-circle-notch fa-spin m-2"></i>
        </div>
        <div class="table-responsive" [class.d-none]="isLoadingMap">
          <div id="worldChart" style="width: 100%; height: 400px; overflow: hidden"></div>
        </div>
        <div class="d-md-none d-inline">
          <button type="button"
            class="btn btn-block btn-xs btn-lighten-blue waves-effect waves-light width-xs mr-md-1 mr-0"
            (click)="loadMap('cases');">{{ 'Shared.TopCards.1' | translate }}</button>
          <button type="button"
            class="btn btn-block btn-xs btn-lighten-danger waves-effect waves-light width-xs mr-md-1 mr-0"
            (click)="loadMap('deaths')">{{ 'Shared.TopCards.3' | translate }}</button>
          <button type="button"
            class="btn btn-block btn-xs btn-lighten-success waves-effect waves-light width-xs mr-md-1 mr-0"
            (click)="loadMap('recovered')">{{ 'Shared.TopCards.4' | translate }}</button>
          <button type="button" class="btn btn-block btn-xs btn-lighten-warning waves-effect waves-light width-xs"
            (click)="loadMap('critical')">{{ 'Shared.TopCards.5' | translate }}</button>
        </div>
      </div>
    </div><!-- end col -->

  </div>
  <div class="row">
    <div class="col-xl-4">
      <div class="card-box">
        <h4 class="header-title mb-3">{{ 'Shared.RateDistribution.1' | translate }} </h4>
        <div class="fa-3x text-center" [class.d-none]="!isLoading">
          <i class="fas fa-circle-notch fa-spin m-2"></i>
        </div>
        <div class="inbox-widget" [class.d-none]="isLoading">

          <div id="radarChart" style="width: 100%; height: 400px"></div>

        </div>
      </div>
    </div><!-- end col -->

    <div class="col-xl-8">
      <div class="card-box">
        <div class="float-md-right float-right d-md-inline d-none">
          <div class="custom-control custom-checkbox">
            <input type="checkbox" class="custom-control-input" id="enableLogarithmicScale" #enableLogarithmicScale
              (change)="loadLineChart(enableLogarithmicScale.checked)">
            <label class="custom-control-label"
              for="enableLogarithmicScale">{{ 'Shared.InfectionsHistory.2' | translate }}</label>
          </div>
        </div>
        <h4 class="header-title mt-0 mb-3 mt-md-0">{{ 'Shared.InfectionsHistory.1' | translate }}</h4>
        <div class="fa-3x text-center" [class.d-none]="!isLoading">
          <i class="fas fa-circle-notch fa-spin m-2"></i>
        </div>
        <div class="table-responsive" [class.d-none]="isLoading">
          <div id="lineChart" style="width: 100%; height: 400px; overflow: hidden"></div>
        </div>
      </div>
    </div><!-- end col -->

  </div>


  <div class="row">
    <div class="col-xl-4">
      <div class="card-box">
        <h4 class="header-title mb-3">{{ 'Home.InfectionCountries.1' | translate }}</h4>
        <div class="fa-3x text-center" [class.d-none]="!isLoading">
          <i class="fas fa-circle-notch fa-spin m-2"></i>
        </div>
        <div class="inbox-widget" [class.d-none]="isLoading">

          <div id="pieChart" style="width: 100%; height: 300px"></div>

        </div>
      </div>
    </div><!-- end col -->

    <div class="col-xl-5">
      <div class="card-box">

        <h4 class="header-title mt-0 mb-3">{{ 'Shared.Rates.1' | translate }}</h4>
        <div class="row">
          <div class="col-12">
            <div class="row">
              <div class="col-xl-6 col-md-6">
                <div class="card-box widget-user bg-d">
                  <div class="text-center">
                    <div class="fa-3x text-center" [class.d-none]="!isLoading">
                      <i class="fas fa-circle-notch fa-spin m-2 text-blue"></i>
                    </div>
                    <h2 [class.d-none]="isLoading" class="font-weight-normal text-success">
                      {{(totalRecoveries / finishedCases * 100) | number:'.1-2'}}%</h2>
                    <h5>{{ 'Shared.Rates.2' | translate }}</h5>
                  </div>
                </div>
              </div>

              <div class="col-xl-6 col-md-6">
                <div class="card-box widget-user bg-d">
                  <div class="text-center">
                    <div class="fa-3x text-center" [class.d-none]="!isLoading">
                      <i class="fas fa-circle-notch fa-spin m-2 text-danger"></i>
                    </div>
                    <h2 [class.d-none]="isLoading" class="font-weight-normal text-danger">
                      {{(totalDeaths / finishedCases * 100) | number:'.1-2'}}%</h2>
                    <h5>{{ 'Shared.Rates.3' | translate }}</h5>
                  </div>
                </div>
              </div>

              <div class="col-xl-6 col-md-6">
                <div class="card-box widget-user bg-d">
                  <div class="text-center">
                    <div class="fa-3x text-center" [class.d-none]="!isLoading">
                      <i class="fas fa-circle-notch fa-spin m-2 text-warning"></i>
                    </div>
                    <h2 [class.d-none]="isLoading" class="font-weight-normal text-warning">
                      {{(totalCritical / activeCases * 100) | number:'.1-2'}}%</h2>
                    <h5>{{ 'Shared.Rates.4' | translate }}</h5>
                  </div>
                </div>
              </div>

              <div class="col-xl-6 col-md-6">
                <div class="card-box widget-user bg-d">
                  <div class="text-center">
                    <div class="fa-3x text-center" [class.d-none]="!isLoading">
                      <i class="fas fa-circle-notch fa-spin m-2 text-info"></i>
                    </div>
                    <h2 [class.d-none]="isLoading" class="font-weight-normal text-info" *ngIf="fuse">
                      {{fuse.list.length}}</h2>
                    <h5>{{ 'Shared.Other.1' | translate }}</h5>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div><!-- end col -->
    <div class="col-xl-3">
      <div class="card-box text-center">
        <h5>{{ 'Shared.Other.2' | translate }}</h5>
        <app-countup></app-countup>
      </div>
      <div class="card-box text-center">
        <a class="btn btn-icon waves-effect btn-blue mr-1" target="_blank" href="https://www.facebook.com/Ahmedboghdady1"> <i class="fab fa-facebook"></i> </a>
        <a class="btn btn-icon waves-effect btn-blue mr-1" target="_blank" href="https://www.linkedin.com/in/ahmed-boghdady-49590ba2/">
          <i class="fab fa-linkedin"></i> </a>
        <a class="btn btn-icon waves-effect btn-blue mr-1" title="ahmed.bogha@gmail.com" target="_blank" > <i class="fab fa-google"></i> </a>
        <a class="btn btn-icon waves-effect btn-blue" title="01063819191" data-action="share/whatsapp/share"> <i
            class="fab fa-whatsapp"></i> </a>
        <div class="col-md-6 pt-1">
          <div class="text-md-right footer-links d-none d-sm-block">
            <a href=""><span class="text-success"><i class="far fa-paper-plane"></i></span>
              {{ 'Shared.Other.11' | translate }}</a>
          </div>
        </div>
      </div>
    </div><!-- end col -->

  </div>

</div> <!-- end container -->